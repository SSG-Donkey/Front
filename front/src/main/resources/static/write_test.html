<!DOCTYPE html>
<html>
<head>
    <title>User Information Form</title>
    <meta charset="UTF-8">
</head>
<body>
<h1>User Information Form</h1>

<form action="http://localhost:6154/api_post/write2" method="post" class="needs-validation" enctype="multipart/form-data" novalidate>
    <div class="form-group">
        <label for="user_nickname">Nickname:</label>
        <input type="text" class="form-control" id="user_nickname" name="user_nickname" required>
    </div>
    <div class="form-group">
        <label for="user_no">User_no:</label>
        <input type="text" class="form-control" id="user_no" name="user_no" required>
    </div>
    <button type="submit" class="btn btn-primary">Submit</button>
</form>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
    $(document).ready(function() {
        // 사용자 정보 로드
        var user_nickname = localStorage.getItem('userNickname');
        user_nickname='hi';
        var user_no =parseInt(localStorage.getItem('userId')) ;
        user_no=123;
        // 닉네임 설정
        $('#user_nickname').val(user_nickname);

        // 유저 번호 설정
        $('#user_no').val(user_no);

        // 폼 제출
        $('form').submit(function(event) {
            event.preventDefault(); // Prevent default form submission

            // 데이터 직접 전송
            var data = {
                user_nickname: user_nickname,
                user_no: user_no
            };

            // POST 요청 보내기
            $.ajax({
                url: 'http://localhost:6154/api_post/user-info', // Replace with your Spring endpoint URL
                type: 'POST',
                data: data,
                success: function(response) {
                    console.log('Success:', response);
                    alert('User information submitted successfully!');
                },
                error: function(error) {
                    console.error('Error:', error);
                    alert('Error submitting user information!');
                }
            });

            return false; // Prevent default form submission
        });
    });
</script>
</body>
</html>