<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>카카오페이</title>
    <link rel="stylesheet" href="./css/paymentSuccess.css">
</head>
<body>
<div class="approval_container__Ju32R">
    <img alt="" loading="lazy" width="58" height="24" decoding="async"
         data-nimg="1"
         src="https://t1.kakaocdn.net/payfe_ssr/production/payment-demo-web/bc4424afb1821f24acbf36e948c8e7241101e035/_next/static/media/kp_core_ic_common_kpay.8a7fa604.svg"
         style="color: transparent;">

    <h1 class="kp-m-typography-title28-600 high-emphasis title_title__Mgsei">온라인 결제</h1>
    <p class="kp-m-typography-body16-normal high-emphasis">카카오페이 결제가 완료되었습니다.</p>
    <div class="kp-m-card card-grey margin-0 radius-16 approval_section__PnMit">
        <div class="kp-m-flexlayout row justify-between align-center">
            <p class="kp-m-typography-body13-normal high-emphasis">구매처</p>
            <p class="kp-m-typography-body13-600 high-emphasis"></p>
        </div>
        <div class="kp-m-flexlayout row justify-between align-center">
            <p class="kp-m-typography-body13-normal high-emphasis">결제일</p>
            <p class="kp-m-typography-body13-600 high-emphasis"></p>
        </div>
        <div class="kp-m-flexlayout row justify-between align-center">
            <p class="kp-m-typography-body13-normal high-emphasis">상품명</p>
            <p class="kp-m-typography-body13-600 high-emphasis"></p>
        </div>
        <div class="kp-m-flexlayout row justify-between align-center">
            <p class="kp-m-typography-body13-normal high-emphasis">결제금액</p>
            <p class="kp-m-typography-body13-600 high-emphasis"></p>
        </div>
    </div>
</div>
</body>
<script>
    $(document).ready(function() {
        // 사용자 정보 로드 (Optional - Use retrieved values or leave empty)
        var user_nickname = localStorage.getItem('userNickname');
        var user_no = localStorage.getItem('userId');

        // Set nickname and user number in form fields (Optional)
        $('#user_nickname').val(username);
        $('#user_no').val(user_no);
        $('.point-status h4').text(`${user_nickname}님의 포인트 정보`);
        user_no=28;
        async function getUserPoint() {
            try {
                // 백엔드 엔드포인트 호출
                const response = await fetch(`https://www.dangnagwi.store/api_post/point?userNo=${user_no}`, {
                    method: 'GET',
                    credentials: 'include', // 세션 쿠키를 포함
                });

                if (!response.ok) {
                    throw new Error('Network response was not ok ' + response.statusText);
                }

                // JSON 데이터를 파싱합니다.
                const data = await response.json();

                // 데이터를 HTML에 표시합니다.
                $('.point-status p').text(`User Point: ${data.amount}`);
            } catch (error) {
                console.error('There was a problem with the fetch operation:', error);
                $('.point-status p').text('Error fetching data');
            }
        }

        // getUserPoint 함수 호출
        getUserPoint();

        // Form submission handling (Optional)
        // 여기에 필요한 로직을 추가하세요.

    });
</script>
</html>